@{
    ViewData["Title"] = "Transações";
}

<h3>Transações Financeiras</h3>
<hr>

<button type = "button" class = "btn btn-block btn-primary" onclick="CriarTransacao()">Registrar Transação</button>

<table class='table table-bordered'>
  <tr>
    <th>#</th>
    <th>#</th>
    <th>Id</th>
    <th>Data</th>
    <th>Valor</th>
    <th>Tipo</th>
    <th>Histórico</th>
    <th>Plano de Conta</th>
  </tr>

  @{
    foreach(var item in (List<TransacaoModel>)ViewBag.Lista)
    {
            <tr>
                <td><button type="button" class = "btn btn-block btn-warning" onclick="EditarTransacao(@item.Id.ToString())">Editar</button></td>
                <td><button type="button" class = "btn btn-block btn-danger deleteItem" data-target="#basic" data-toggle="modal" data-path="ExcluirTransacao(@item.Id.ToString())">Excluir</button></td>
                <td>@item.Id</td>
                <td>@item.Data</td>
                <td>@item.Valor</td>
                <td>@item.Tipo</td>
                <td>@item.Historico</td>
                <td>@item.IdPlanoConta</td>
            </tr>
    }

  }
</table>

<div class="modal fade" id="basic" tabindex="-1" role="basic" aria-hidden="true" style="display: none;">
<div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
            <h4 class="modal-title">Confirmação</h4>
        </div>
        <div class="modal-body">
            Você realmente deseja excluir esse item?
        </div>
        <div class="modal-footer">
            <button data-dismiss="modal" type="button" class="btn btn-default">Cancelar</button>
            <button id="btnContinueDelete" type="button" class="btn btn-primary">Deletar</button>
        </div>
    </div>
</div>

<script>

    var path_to_delete;

    $(".deleteItem").click(function(e) {
        path_to_delete = $(this).data('path');
    });

    $('#btnContinueDelete').click(function () {
        window.location.href = path_to_delete;
    });

    function EditarTransacao(id)
    {
        window.location.href = "../Transacao/CriarTransacao/" + id;
    }

    function RotaExcluirTransacao(id)
    {
        return "../Transacao/ExcluirTransacao/" + id;
    }

         
</script>